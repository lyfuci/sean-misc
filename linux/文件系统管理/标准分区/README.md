[toc]

# 文件系统管理
## 分区
### MBR
MBR(主引导记录) 最多只能有4个(主分区+扩展分区),扩展分区可以进一步划分逻辑分区，单分区最大2TB,存储于磁盘的第一个扇区（512Byte）其中包含446个字节的启动代码和4个磁盘分区表项（单个16字节）以及2个字节的签名。

**分区命令** 
fdisk

对新加的 *磁盘* 进行分区
`fdisk /dev/sdb` 交互式命令，下面为一些常用操作箱
F: 打印未分区的空间
n: 添加新分区
d: 删除一个分区
p: 打印分区信息
w: 保存分区信息

> 第四个分区应该把全部空间划分到扩展分区，才能保证分区不被浪费，或者直接第一个分区就是扩展分区，防止以后的误操作


### GPT
GTP 最多能有1024个(主分区+扩展分区)，最大单分区18EB（18 * 1024(P) * 1024(T) GB）

**分区命令**
`gdisk /dev/sdb` 交互式命令与 fdisk 类似

## 格式化
格式化的目的是写入文件系统(组织文件存储)，可以调整参数，如inode数量、block大小和文件feature等方法来制作更适合应用场景的文件系统。

常用命令

* mkfs  
* mkfs.cramfs 
* mkfs.ext2 
* mkfs.ext3 
* mkfs.ext4 
* mkfs.fat  
* mkfs.minix  
* mkfs.msdos 
* mkfs.vfat 
* mkfs.xfs
* mkswap  # 创建 swap 分区

文件系统创建成功后通过一下命令查看到文件系统对应的uuid

`ls /dev/disk/by-uuid/ -alh`


## 挂载
挂载操作对象是文件系统(已格式化的分区)

查看已挂载的分区
`df -Th`
> -T 表示文件系统类型
> -h 人类易读显示
> -i inode 使用情况

查看所有挂载情况

`mount`


查看永久挂载的情况可以通过下面命令查看

`cat /etc/fstab`
> fstab 格式<br>
> 第一列 文件系统所在的分区设备路径或者uuid<br>
> 第二列 挂载点<br>
> 第三列 文件系统的类型<br>
> 第四列 挂载参数<br>
> 第五列和第六列一般写0
> 
> 修改fstab文件之后可以使用 `mount -a` 对在fstab文件中新增的内容进行挂载

挂载某个文件系统

`mount -t 文件系统类型 分区路径 挂载点路径`
> 原生 linux 文件系统、不需要加 -t 参数，能自动识别。

挂载所有

`mount -a` 依据 /etc/fstab 来自动挂载
> 要挂载和卸载 swap 文件系统需要使用 swapon -a 和swapoff -a 


